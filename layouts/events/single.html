{{ define "main" }}
{{ if ne .Params.hide_cta true }} {{- partial "main-cta.html" . -}} {{ end }}
<article>
  <header id="post-header">
    <h1>{{ .Title }}</h1>
    <ul class="event-meta">
      <li class="event-when"><span class="event-meta-tip">Date:</span> {{ with .Params.display_date }}{{ . | markdownify }}{{ else }}{{ .Params.event_date | time.Format "02 January 2006" }}{{ end }}</li>
      {{if isset .Params "when_time"}}<li class="event-when"><span class="event-meta-tip">Time:</span> {{ .Params.when_time | markdownify }}</li>{{ end }}
      {{ $eventDate := .Params.event_date | default .Date }}
      {{ if ge (time $eventDate) now }}
        <li class="event-where"><span class="event-meta-tip">Where:</span> {{ .Params.where | markdownify }}</li>
        {{if isset .Params "zoom_registration_url"}}<li class="event-price"><span class="event-meta-tip">Cost:</span> {{ .Params.price | markdownify }}</li>{{ end }}
      {{ end }}
    </ul>
    <div class="event-cta">{{if isset .Params "cta_url"}}<a href="{{ .Params.cta_url }}">{{end}}{{ .Params.cta_text }}{{if isset .Params "cta_url"}}</a>{{end}}</div>
  </header>
  
  {{ if .Params.images }}
    <div class="event-images">
      {{ range .Params.images }}
        {{ $image := resources.Get . }}
        {{ if $image }}
          <img src="{{ $image.RelPermalink }}" alt="{{ $.Title }}" class="event-hero-image" />
        {{ end }}
      {{ end }}
    </div>
  {{ end }}
    <p>{{ .Params.description | markdownify }}</p>
  {{- .Content -}}

  {{if isset .Params "zoom_registration_url"}}
    <iframe width="100%" height="500px" frameborder="no" scrolling="no" seamless src="{{ .Page.Params.zoom_registration_url }}"></iframe>
  {{ end }}
</article>
{{ end }}
